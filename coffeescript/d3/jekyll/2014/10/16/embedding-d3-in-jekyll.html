<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Embedding D3.js in a Jekyll blog post</title>
    <meta name="description" content="Personal blog of Charlie Andrews.
">

    <link href='https://fonts.googleapis.com/css?family=Sorts+Mill+Goudy:400,400italic|Inconsolata:400,700|Raleway' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://zeptonaut.com/coffeescript/d3/jekyll/2014/10/16/embedding-d3-in-jekyll.html">
    <link rel="alternate" type="application/rss+xml" title="" href="http://zeptonaut.com/feed.xml">
    <!-- Google analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-16399815-3', 'auto');
      ga('send', 'pageview');
    </script>
</head>


  <body>

    

    <div class="page-content">
      <div class="post">

  <header class="post-header">
    <h1 class="post-title">Embedding D3.js in a Jekyll blog post</h1>
    <time>10/16/2014</time>
  </header>

  <article class="post-content">
    <p>If you haven’t heard of it, there’s a neat little data binding library that the Javascript world is pretty taken with called D3.js. In short, D3.js allows you to cleanly and easily write Javascript that takes actions based on a dataset. You could imagine something like this might be useful when creating a bar graph in Javascript, changing the height of rectangles on the page depending on the datum.</p>

<p>While reading about D3.js, I began wondering how hard it would be to embed it in a Jekyll blog post. Thankfully, it’s not very difficult.</p>

<p>The key is that D3.js requires some anchor on the page to target. Jekyll posts are written in Markdown, and Markdown documents allow you to embed raw HTML simply by putting that HTML into its own paragraph.</p>

<p>This means that we can insert the following HTML at the bottom of our page:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"example"</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></figure>

<p>We can then put this Javascript that uses D3.js at <code class="highlighter-rouge">&lt;jekyll_base_directory&gt;/js/embed-d3.js</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">dataset</span><span class="p">;</span>
    <span class="nx">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">];</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">"#example"</span><span class="p">).</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">"p"</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataset</span><span class="p">).</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">"p"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">};</span>

<span class="p">}).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></code></pre></figure>

<p>Without getting too much into the details, we’re creating five paragraphs within the div with ID <code class="highlighter-rouge">example</code> and putting the numbers 5, 10, 15, 20, and 25 into those paragraphs.</p>

<p>We can pull in both D3.js and our script by putting this HTML right below the div:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.12/d3.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{{site.basurl}}/js/embed-d3.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>This may not be the <em>optimal</em> place to place the Javascript includes but it works for now.</p>

<p>Here’s the result:</p>

<div id="example" style="background: #eef; font-family: monospace; padding: 10px; margin: 10px 0px;"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.12/d3.js"></script>

<script src="/js/embed-d3.js"></script>


  </article>
  <a href="/index.html">« Back</a>
</div>

    </div>

    <link rel="alternate" type="application/rss+xml" title="" href="http://zeptonaut.com/feed.xml">


  </body>

</html>
